---
title: "主机硬件"
date: "2022-09-10 09:53:00"
lastmod: "2022-09-25 21:50:49"
categories: ["Hardware"]
draft: false
---

## CPU {#cpu}

Intel &amp; AMD
主频＝外频 X 倍频

主频：即 CPU 内核工作的时钟频率（CPU Clock Speed）。CPU 的主频表示在 CPU 内数字脉冲信号震荡的速度，与 CPU 实际的运算能力并没有直接关系。

外频：是 CPU 乃至整个计算机系统的基准频率，单位是 MHz。

倍频：是指 CPU 主频与外频之间的相对比例关系。最初 CPU 主频和系统总线速度是一样的，但 CPU 的速度越来越快，倍频技术也就相应产生。（倍数可以是大于 1 的，也可以是小于 1 的）

超频：就是通过改变 CPU 的倍频或者外频来实现提升 CPU 的主频。

CPU 与系统之间数据传输速度是有限的，一味追求高倍频而得到高主频的 CPU 就会出现明显的“瓶颈”效应——CPU 从系统中得到数据的极限速度不能够满足 CPU 运算的速度。

FSB：是将 CPU 连接到北桥芯片的总线。


## GPU {#gpu}

-   NVIDIA
-   AMD


## Chipset {#chipset}


### North(Host) Bridge {#north--host--bridge}

北桥芯片负责联系内存、显卡等数据吞吐量最大的部件，并和南桥芯片连接。CPU 就是通过前端总线（FSB）连接到北桥芯片，进而 通过北桥芯片和内存、显卡交换数据。

最新的主板是没有北桥了，北桥的作用是连接高速设备，说白了就是 CPU 和内存，AMD 提出 Hyper Transport 总线后，内存控制器集成在 CPU 里面。

数据带宽＝（总线频率×数据位宽）÷8

外频与前端总线频率的区别：
前端总线的速度指的是 CPU 和北桥芯片间总线的速度，更实质性的表示了 CPU 和外界数据传输的速度。而外频的概念是建立在数字脉冲信号震荡速度基础之上的，它更多的影响了 PCI 及其他总线的频率。

内存控制器、pcie 控制器等，负责 cpu 和高速接口之间的数据交换


### South Bridge {#south-bridge}

IO 支持、KBC、RTC、USB


## MEMORY {#memory}


### RAM {#ram}

-   SRAM
    速度非常快，价格贵，常用在 CPU 一、二级 Cache

-   D(Dynamic)RAM
    比 SRAM，速度慢，价格便宜，计算机内存.包含：EDORAM、SDRAM、DDR RAM、RDRAM

-   SDRAM (同步 DRAM)
    -   是为把 DRAM 操作同步到计算机系统其余部分。（SDRAM 增加了时钟信号和内存命令的概念。）
    -   通过提高时钟速率、突发数据及每个时钟周期传送两个数据位，DDR (双倍数据速率) SDRAM 提高了内存数据速率性能。

-   DDR(Double-Data-Rate) RAM
    -   计算机最常用内存
    -   工作原理：
        -   动态指当我们将数据写入 DRAM 后，经过一段时间，数据会丢失，因此需要一个额外设电路进行内存刷新操作。
    -   工作过程：
        -   一个 DRAM 的存储单元存储的是 0 还是 1 取决于电容是否有电荷，有电荷代表 1，无电荷代表 0。但时间一长，代表 1 的电容会放电，代表 0 的电容会吸收电荷，这就是数据丢失的原因；
        -   刷新操作定期对电容进行检查，若电量大于满电量的 1／2，则认为其代表 1，并把电容充满电；若电量小于 1／2，则认为其代表 0，并把电容放电，藉此来保持数据的连续性。


### ROM {#rom}

1.  PROM（可编程
2.  EPROM（可编程可擦除：过紫外光的照射擦出原先的程序
3.  EEPROM（电可编程可擦除：写入时间长，速度慢


### FLASH：又称闪存 {#flash-又称闪存}

REF： [杂谈闪存二：NOR和NAND Flash](https://zhuanlan.zhihu.com/p/26745577)

-   结合了 ROM 和 RAM 的长处，不仅具备电子可擦除可编程（EEPROM）的性能，还不会断电丢失数据同时可以快速读取数据（NVRAM 的优势）


#### Nor Flash {#nor-flash}

-   可以支持随机访问，这使它也具有支持 XIP（eXecute In Place）的特性，可以像普通 ROM 一样执行程序。
    -   这点让它成为 BIOS 等开机就要执行的代码的绝佳载体。
-   NOR Flash 根据与 Host 端接口的不同，可以分为
    -   Parallel NOR Flash
        -   可以接入到 Host 的控制器 上，所存储的内容可以直接映射到 CPU 地址空间，不需要拷贝到 RAM 中即可被 CPU 访问。
        -   并行接口，速度缓慢，现在基本已经被淘汰。
    -   Serial NOR Flash
        -   Serial NOR Flash 的成本比 Parallel NOR Flash 低，主要通过 SPI 接口与 Host 也就是 PCH 相连。
-   和 SDRAM 读取一样可以直接运行装载在 NOR FLASH 里面的代码，这样可以减少 SRAM 的容量从而节约了成本


#### Nand Flash {#nand-flash}

-   没有采取内存的随机读取技术，它的读取是以一次读取一块的形式来进行的，通常是一次读取 512 个字节，采用这种技术的 Flash 比较廉价。
-   用户不能直接运行 NAND Flash 上的代码，因此好多使用 NAND Flash 的开发板除了使用 NAND Flah 以外，还作上了一块小的 NOR Flash 来运行启动代码。
-   颗粒根据每个存储单元内存储比特个数的不同，可以分为
    -   SLC（Single-Level Cell）
        -   可以存储 1 个比特
    -   MLC（Multi-Level Cell）
        -   可以存储 2 个比特
    -   TLC（Triple-Level Cell）
        -   可以存储 3 个比特
-   NAND Flash 的单个存储单元存储的比特位越多，读写性能会越差，寿命也越短，但是成本会更低。
-   NAND Flash 相对 NOR Flash 更可能发生比特翻转，就必须采用错误探测/错误更正(EDC/ECC)算法，同时 NAND Flash 随着使用会渐渐产生坏块；


#### 区别 {#区别}

-   生产 FLASH：Intel，AMD，Fujitsu 和 Mxic
-   生产 NAND FLASH：Samsung 和 Toshiba 及 Hynix

| 属性          | NOR            | NAND              |
|-------------|----------------|-------------------|
| 容量          | 较小           | 很大              |
| XIP(可执行 code) | 可以           | 不行              |
| 读取速度      | 很快           | 快                |
| 写入速度      | 慢             | 快                |
| 擦除速度      | 很慢           | 快                |
| 可擦除次数    | 10,000-100,000 | 100,000-1,000,000 |
| 可靠性        | 高             | 较低              |
| 访问方式      | 可随机访问     | 块方式            |
| 价格          | 高             | 低                |


### DRAM: {#dram}

Synchronous Dynamic Random Access Memory：
第一代 SDR SDRAM，第二代 DDR SDRAM，第三代 DDR2 SDRAM，第四代 DDR3 SDRAM


### DDR RAM {#ddr-ram}

涉及两个频率：

-   等效频率
-   实际频率

DDR 内存是取代 SDR 内存的，因此面世的时候，性能是比较 SDR 来说的。DDR，第一个 D 是 Double 的意思，即同一周期内，数据传输两次，而 SDR 只有一次。

DDR 内存都标等效频率，而不是标真实频率，（DDR3 1600，1600 表示 1600MHZ，是等效频率。真实频率是 800MHZ）

DDR2 内存拥有两倍于上一代 DDR 内存预读取能力（即：4bit 数据预读取）；每个时钟能够以 4 倍外部总线的速度读/写数据，并且能够以内部控制总线 4 倍的速度运行。

DDR3 相对 DDR2 来说同频率下数据传输量将会是 DDR2 的两倍，同时更加省电。

内存本身不具备晶体振荡器，因此内存工作时的时钟信号是由主板芯片组的北桥或直接由主板的时钟发生器提供，内存无法决定自身的工作频率，其实际工作频率是由主板来决定。

DDR 内存可以在脉冲的上升和下降沿都传输数据，因此传输数据的等效频率是工作频率的两倍；而 DDR2 内存每个时钟能够以四倍于工作频率的速度读/写数据，因此传输数据的等效频率是工作频率的四倍。（注意区分等效频率和传输数据的等效频率的说法）

-   双通道
    -   双通道内存技术是解决 CPU 总线带宽与内存带宽的矛盾的低价、高性能的方案。
    -   SDRAM、DDR、DDR2、DDR3 位宽都是 64bit。如果组成双通道，位宽可以达到 128bit.
    -   前端总线只有频率之分，没有位宽之分。


## BUS {#bus}


### SPI {#spi}

-   三根信号线
    1.  串行\*\*BUS\*\*时钟 SCLK
    2.  串行数据输出 SDO
    3.  串行数据输入 SDI
    4.  外加一条片选信号，实现主从多设备，提供 SCLK 的是 Master
-   特点
    1.  可全双工
    2.  对双方时序要求不严格，不同设备之间很容易结合，通信速度快
    3.  多用在产品内部元件之间高速数据通信，如大容量存储器


### IIC {#iic}

1.  双向，两线（SCL、SDA）、多主控，总线仲裁
2.  适合器件之间进行近距离、非经常性数据通信
3.  数据可带设备地址，实现组网
4.  特点
5.  两线，之间复杂的逻辑关系通信，速度不高
6.  多用在单片机小系统


### UART {#uart}

-   组成
    1.  波特率产生器
    2.  两线
    3.  UART 接收器
    4.  UART 发送器
-   特点
    1.  可全双工
    2.  对比方时序求比较严格，通信速度不快，用于多机通信
-   RS485
    1.  发送端 AB 间的电压差
    2.  ＋2 ～ ＋6v 1
    3.  －2 ～ －6v   0
-   接收端 AB 间的电压差
    1.  大于 ＋200mv   1
    2.  小于 －200mv 0
-   RS232
    1.  －15v ~ －3v 代表 1
    2.  ＋3v ~ ＋15v 代表 0


### CAN {#can}

-   分布式 | 实现控制 串行通信网络
-   CAN 收发器和控制器分别对应 CAN 的物理层和数据链路层
-   CAN 收发器：实现 CAN 控制器逻辑电平与 CAN 总线上差分电平的互换
-   CAN 收发器方案
    1.  使用 CAN 收发 IC（需要加电源隔离和电气隔离）
    2.  使用 CAN 隔离收发模块 |推荐
-   CAN 控制器是 CAN 的核心元件，它实现了 CAN 协议中数据链路层的全部功能，能够自动完成 CAN 协议的解析
    1.  CAN 控制器两种方案
        1.  控制器 IC（SJA1000）
        2.  集成 CAN 控制器的 MCU（LPC11C00） |推荐
            1.  MCU 负责实现对功能电路和 CAN 控制器的控制
            2.  在节点启动时，初始化 CAN 控制器参数
            3.  通过 CAN 控制器读取和发送 CAN 帧
            4.  在 CAN 控制器发生中断时，处理 CAN 控制器的中断异常
            5.  根据接收到的数据输出控制信号
-   两线
    1.  CAN\\_H 和 CAN\\_L
    2.  通过差分信号传输
-   两种电平
    1.  在 CAN 规范中并未定义代表逻辑电平的物理状态（例如电压）
        1.  典型地，CAN 总线为“隐性”（逻辑 1）时，CAN\\_H 和 CAN\\_L 的电平为 2.5V（电位差为 0V）；
        2.  CAN 总线为“显性”（逻辑 0）时，CAN\\_H 和 CAN\\_L 的电平分别是 3.5V 和 1.5V（电位差为 2.5V）
    2.  隐性电平 和 显性电平
        1.  若隐性电平相遇，则总线表现为隐性电平；
        2.  若显性电平相遇，则总线表现为显性电平；
        3.  若隐性电平和显性电平相遇，则总线表现为显性电平
-   特点
    1.  真正的多主机网络
        1.  在总线处于空闲状态时，任何一个节点单元都可以申请成为主机，向总线发送消息。
        2.  最先访问总线的节点单元可以获得总线的控制权；多个节点单元同时尝试获取总线的控制权时，将发生仲裁事件，具有高优先级的节点单元将获得总线控制权。
    2.  访问优先级
        1.  CAN 协议中，所有的消息都以固定的数据格式打包发送
        2.  两个以上的节点单元同时发送信息时，根据节点标识符（常称为 ID，亦打包在固定的数据格式中）决定各自优先级关系，所以 ID 并非表示数据发送的目的地址，而是代表着各个节点访问总线的优先级。
        3.  CAN 总线并无类似其他总线“地址”的概念，在总线上增加节点单元时，连接在总线的其他节点单元的软硬件都不需要改变。
    3.  CAN 总线的通信速率和总线长度有关
        1.  当总线上发生持续错误时，引起故障的节点单元会自动脱离总线。
    4.  总线长度小于 40m 的场合中，速度可达 1Mbps。 距离可达 10km | 无损位仲裁
    5.  CAN 总线上的节点数量在理论上没有上限，但在实际上收到总线上的时间延时及电气负载的限制。降低最大通信速率，可以增加节点单元的连接数；反之，减少节点单元的连接数，则最大通信速率可以提高。
    6.  总线终端电阻 120Ω，电缆特性阻抗 120Ω，模拟无限 远传输线


## USB {#usb}


## PCI {#pci}

-   并行联接
-   PCI 接口分为 32bit 和 64bit 两种 ；
    1.  32bit 就是一般台式机使用的普通的 pci 接口；
    2.  64bit 接口比 32bit 接口长一些一般只出现在服务器上。
-   PCI 总线在单一时间周期内只能实现单向传输。


### PCI-X {#pci-x}

-   在外形上和 64bit 的 PCI 基本上是一样的，但是它们使用的是不同的标准，PCI-X 的插槽可以兼容 PCI 的卡。
-   共享总线，插多个设备传输速率会下降；一般只出现在服务器主板上。


### PCI-E {#pci-e}

-   PCI Express 是 INTEL 提出的新一代的总线接口；将来取代 PCI 和 APG 显卡（Accelerate Graphical Port，点对点）
-   点对点串行连接。
-   双单工连接能提供更高的传输速率和质量
-   一般的 PCI-E 插槽颜色不是白色，PCI 是全白的。


## HDD/SSD {#hdd-ssd}


### 总线 {#总线}

-   IDE(Integrated Drive Electronics),
    -   本意是指把控制器与盘体集成在一起的硬盘驱动器，是一种硬盘的传输接口, 有另一个名称叫做 ATA（Advanced Technology Attachment）
-   ATA
    -   并行，位宽 16bit，也叫做 PATA(Parallel ATA)
    -   增加线的根数，硬件复杂，提高频率，并行总线的串拢的同步问题，所以 PATA 总线的终极速率最终止步在 133MB/s
-   SATA
    -   串行传输方式，规避了并行总线在高速下的串扰和同步问题。
    -   SATA 只有 4 根线，分别为：发送数据线，接收数据线，电源线，地线。
    -   两个标准
        -   SATA ：有效带宽为 150MB/s ，数据速率为 1.5Gbps
        -   SATA II ：有效带宽为 300MB/s ，数据速率为 3Gbps
-   SCSI：Small Computer System Interfae
    -   它出现的原因主要是因为原来的 IDE 接口的硬盘转速太慢，传输速率太低，因此高速的 SCSI 硬盘出现。其实 SCSI 并不是专为硬盘设计的，实际上它是一种总线型接口。独立于系统总线工作.
    -   并行总线，其优点是适应面广，性能高；缺点是价格昂贵，安装复杂。
    -   内置型接口有三种：分别为 50PIN 、68PIN 和 80PIN
    -   外置型接口有七种：分别为 Apple SCSI 、Centronics 、SCSI-2 、Sun Microsystem 、SCSI-3 、Wide SCSI-2 、SCA
-   SAS: Serial Attached SCSI
    -   新一代的 SCSI 技术。和现在流行的 Serial ATA(SATA)硬盘相同，都是采用串行技术以获得更高的传输速度，并通过缩短连结线改善内部空间等
    -   可以向下兼容 SATA;二者的兼容性主要体现在物理层和协议层的兼容;从接口标准上而言，SATA 是 SAS 的一个子标准，因此 SAS 控制器可以直接操控 SATA 硬盘，但是 SAS 却不能直接 使用在 SATA 的环境中，因为 SATA 控制器并不能对 SAS 硬盘进行控制；
-   FC：Fiber Channe
    -   奠定了存储领域高端应用的基石，以点对点的配置方式在系统之间采用了光缆连接。
    -   FC 硬盘名称由于通过光学物理通道进行工作，因此起名为光纤硬盘，现在也支持铜线物理通道。
    -   最初专门为网络系统设计的，但随着存储系统对速度的需求，才逐渐应用到硬盘系统中。


### SSD：（Solid State Disk 或 Solid State Drive） {#ssd-solid-state-disk-或-solid-state-drive}

-   由控制单元和固态存储单元（DRAM 或 FLASH 芯片）组成的硬盘。
-   一个 block 是由许多 Page（4K）组成的，写入的时候以 page 单位，擦除是以 block（包含 16page）为单位。（page 去充电电路和导线太复杂，工艺问题）
-   工作原理：创建一个电场，电子穿过氧化物并储存电荷(用寄存器单元记录一个电位值)电子穿过氧化物的次数越多，就会变的越弱，最终电压也不能再阻止电子的自由活动了。
-   确保使用寿命的方式
    -   wear-leveling(平均损耗技术)：平衡计算 block 的写入次数，防止整个磁盘的 block 写入次数不均衡。
        -   \*\*动态磨损\*\*平衡：会让保存冷数据（使用频率低的只读数据）的 block 极少得到擦除，对闪存整体寿命产生不利影响
        -   \*\*静态磨损\*\*平衡：把冷数据所在的 block 也加入磨损平衡中，增加了闪存的总体寿命。
    -   尽量减少写入操作：删除数据时，SSD 会标记 Pages 为无效，但实际上并不会删除该 block，SSD 将等到 block 中一定比例的 Pages 都被标记为无效时，才会复制一些有效的数据到新的 Pages 里去并擦除该 block。
-   GC（垃圾回收）：指把现存数据重新转移到其他闪存位置，并且把一些无用的数据彻底删除的过程。
-   写放大：写入新数据时，如果 SSD 控制器找不到可以写入的 page 时，会执行 GC 过程，然后再将新数据写入到这些 block 中。


### RAID {#raid}

-   RAID 0：Data Stripping 数据分条技术；把多块硬盘连成一个容量更大的硬盘群，可以提高磁 盘的性能和吞吐量，至少需要 2 块盘
-   RAID 1：Mirror 或 Mirroring 镜像技术；把一个磁盘的数据镜像到另一个磁盘上，可靠性，冗余，利用率 50%，至少需要 2 块盘
-   RAID 5：读：RAID 5＝RAID 0（相近似的数据读取速度）写：RAID 5&lt;对单个磁盘进行写入操作（多了一个奇偶校验信息写入）
-   RAID 10：（RAID 0+1）至少需要 4 块盘，读：RAID10＝RAID0 写：RAID10＝RAID1

MTBF（Mean TimeBetweenFailure）平均无故障时间。也指相邻两次故障之间的平均工作时间，也称为平均故障间隔

规定 PC 产品的 MTBF 要达到一定的水平，中国对 MTBF 平均无故障工作时间的规定是 4000 小时

MTBF 计算中主要考虑的是产品中每个元器件的失效率。（参考使用环境，使用条件）

产品的故障总数与寿命单位总数之比叫“故障率”（Failure rate）（λ）；产品在总的使用阶段累计工作时间与故障次数的比值为 MTBF（故障率的倒数）。


## IRIGB {#irigb}


## DIO {#dio}


## POWER {#power}

1.  功率电源
2.  开关电源