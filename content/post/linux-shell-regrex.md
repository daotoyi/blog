---
title: "Linux shell 正则表达式"
date: "2024-03-02 23:55:00"
lastmod: "2024-03-02 23:55:12"
categories: ["Linux"]
draft: false
---

-   \\ 将下一个字符标记为一个特殊字符、或一个原义字符、或一个反向引用、或一个八进制转义符。例如，'\\\\'匹配斜线"\\"，'\\('匹配括号"("。更多用法，请继续阅读下文。
-   ^ 匹配字符串的开始位置。
-   $ 匹配字符串的结束位置。
-   \* 匹配前面的子表达式零次或多次。例如，'fo\*'能匹配"f"、"fo"、"foo"。
-   + 匹配前面的子表达式一次或多次。例如，'fo+'能匹配"fo"以及"foo"，但不能匹配"f"。
-   ? 匹配前面的子表达式零次或一次。例如，'do(es)?'可以匹配"do"或"does"。
-   {n} n 是一个非负整数。匹配确定的 n 次。例如，'o{2}'能匹配"good"中的"oo"，不能匹配"job"中的"o"。
-   {n,} n 是一个非负整数，最少匹配 n 次。例如，'2{2,}'不能匹配"123"中的"2"，能匹配"12223"中所有的"2"。'{0,}'等价于'\*'，'{1,}'等价于'+'。逗号和数之间不能有空格。
-   {n,m} m 和 n 均为非负整数，其中 n&lt;=m，最少匹配 n 次，并且最多匹配 m 次。'2{1,3}'将分别匹配到"122223"中的前三个"2"和第四个"2"。'{0,1}'等价于'?'。执行命令及输出如下：

    ```text
    ~$ echo 122223|grep -Eo '2{1,3}'
    222
    2
    其中-o 表示只打印匹配的部分，每个匹配部分在单独的输出行上。
    ```
-   . 匹配除"\n"之外的任何单个字符。要匹配包括"\n"在内的任何字符，请使用'[.\n]'。

    ```test
    (Pattern)
    匹配 Pattern 并获取这一匹配，即匹配组。所获取的匹配可以通过反向引用获取到.
    例如，'\1'表示反向引用第一个匹配组，'(.)\1'可以匹配两个连续的相同字符。要匹配圆括号字符，请使用'\('或'\)'。可以使用此方式查找回文字符串，例如：
    ~$ printf "123\n12321\n1221\n"|grep -Eo '(.)(.).?\2\1'
    12321
    1221
    ```
-   x|y 匹配 x 或 y。例如，'f|good'能匹配"f"或"good"。要匹配"food"或"good"，则使用'(f|g)ood'。
-   [xyz] 匹配字符集合。匹配所包含的任意一个字符。例如，'[123]'可以匹配"1"或"2"或"3"。
-   [^xyz] 排除字符集合，匹配未包含的任意一个字符。例如， '[^123]'不会匹配"1"或"2"或"3"。
-   [a-z] 匹配字符范围，匹配该范围内的任意一个字符。例如，'[a-z]'可以匹配任意一个小写字母，'[0-9]'可以匹配任意一个数字。
-   \`[[:alnum:]\` 匹配所有字母和数字，匹配该范围内的任意一个字符。类似'[:alnum:]'这样的表示方法，还有'[:alpha:]'所有字母、'[:digit:]'所有数字等，更多写法请参考文末相关阅读。例如：

    ```text
    ~$ echo '!1q@'|grep -Eo '[[:alnum:]]'
    1
    q
    ```
-   [^a-z] 排除字符范围，匹配任何不在指定范围内的任意一个字符。例如，'[^A-Z]'可以匹配大写字母以外的任意字符。
-   [^[:alnum:]] 排除所有字母和数字，匹配非字母和数字的任意一个字符。例如：

    ```text
    ~$ echo '12!@qw'|grep -Eo '[^[:alnum:]]'
    !
    @
    ```
-   \b 匹配一个单词边界，也就是指单词和空格间的位置。例如， 'time\b' 可以匹配"time"，但不能匹配"timeout"。
-   \B 匹配非单词边界。
-   \cX 匹配控制字符。例如，'\cM'匹配回车符，'\cJ'匹配换行符。
-   \d 匹配一个数字字符。等价于'[0-9]'。
-   \D 匹配一个非数字字符。等价于'[^0-9]'。
-   \f 匹配一个换页符。等价于'\x0c'和'\cL'。
-   \n 匹配一个换行符。等价于'\x0a'和'\cJ'。
-   \r 匹配一个回车符。等价于'\x0d'和'\cM'。
-   \s 匹配任何空白字符，包括空格、制表符、换页符等等。等价于'[ \f\n\r\t\v]'。
-   &sect; 匹配任何非空白字符。等价于'[^ \f\n\r\t\v]'。
-   \t 匹配一个制表符。等价于'\x09'和'\cI'。
-   \v 匹配一个垂直制表符。等价于'\x0b'和'\cK'。
-   \w 匹配包括下划线的任何单词字符。等价于'[a-zA-Z0-9_]'。
-   \W 匹配任何非单词字符。等价于'[^a-zA-Z0-9_]'。
-   \xnn 是一个非负整数，匹配 n 表示的十六进制转义值。十六进制转义值必须为确定的两个数字长。例如，'\x41'匹配"A"。'\x041'则等价于'\x04'和"1"。
-   \n n 是一个非负整数，匹配 n 表示的八进制转义值，或反向引用前面的匹配组。
    -   如果'\n'之前有 n 个匹配组，则'\n'为反向引用。
    -   否则，如果 n 为八进制数字（0-7），则'\n'为八进制转义值。
    -   例如，'(.)\\1'匹配两个连续的相同字符。
-   \un n 是一个非负整数，匹配 n 表示的 Unicode 字符，其中 n 是这个 Unicode 字符的十六进制表示。例如，'\u00A9'匹配版权符号©
