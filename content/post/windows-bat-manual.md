---
title: "Windows bat manual"
date: "2024-01-14 14:28:00"
lastmod: "2024-01-14 14:28:06"
categories: ["Windows"]
draft: false
---

## BAT Archive {#bat-archive}

```bat
:: 输出空行
echo.
```


## 常用命令 {#常用命令}


### start {#start}


#### 简述 {#简述}

启动单独的“命令提示符”窗口来运行指定程序或命令。如果在没有参数的情况下使用，start 将打开第二个命令提示符窗口。


#### 参数 {#参数}

```cfg
"title" 指定在“命令提示符”窗口标题栏中显示的标题。
/wait 启动应用程序，并等待其结束。
/dpatch 指定启动目录。
/min 启动新的最小化窗口。
/max 启动新的最大化窗口。
/i 将 Cmd.exe 启动环境传送到新的“命令提示符”窗口。

/separate 在单独的内存空间启动 16 位程序。
/shared 在共享的内存空间启动 16 位程序。
/low 以空闲优先级启动应用程序。
/normal 以一般优先级启动应用程序。
/high 以高优先级启动应用程序。
/realtime 以实时优先级启动应用程序。
/abovenormal 以超出常规优先级的方式启动应用程序。
/belownormal 以低出常规优先级的方式启动应用程序。
/b 启动应用程序时不必打开新的“命令提示符”窗口。除非应用程序启用 CTRL+C，否则将忽略 CTRL+C 操作。使用 CTRL+BREAK 中断应用程序。
```


#### 注意 {#注意}

-   如果你所在程序的路径中带有空格，那么必须用“”把路径括起来，否则系统会提示找不到 XX 文件。
-   在运行某些程序时，需在路径的前面加一对空白的“”，表示创建一个空白的窗口。


#### 实例 {#实例}

```bat
rem 运行位于“D:/draw/”的“photoshop.exe”
start "" "D:/draw/photoshop.exe"

rem 以最大化窗口运行
start /max "" "D:/draw/photoshop.exe"

rem 最小化
start /min "" "D:/draw/photoshop.exe"

rem 等待某个程序允许完毕，也就是窗口关闭后，再打开下一个程序这可以这样：
start /w "" "D:/draw/photoshop.exe"

start "" cmd.exe
```


## 路径参数 {#路径参数}


### %~dp0 变量语法 {#dp0-变量语法}

-   ~    是扩展的意思，相当于把一个相对路径转换绝对路径
-   %0   代指批处理文件自身
-   %1   表示批处理文件命令行接收到的第一个参数，%2 表示第二个，以此类推
-   %~d0 是指批处理所在的盘符，其中 d 代表盘符 drive
-   %~p0 是指批处理所在的目录，其中 p 代表路径 path
-   %~dp0 是批处理所在的盘符加路径
-   %~f0  完整的路径+文件名
-   %~n0  文件名(无扩展名)


### 扩充变量语法 {#扩充变量语法}

```bat
:: 选项语法 :
:: ~I - 删除任何引号 (") ，扩充 %I
:: %~fI - 将 %I 扩充到一个完全合格的路径名
:: %~dI - 仅将 %I 扩充到一个驱动器号
:: %~pI - 仅将 %I 扩充到一个路径
:: %~nI - 仅将 %I 扩充到一个文件名
:: %~xI - 仅将 %I 扩充到一个文件扩展名
:: %~sI - 扩充的路径只含有短名
:: %~aI - 将 %I 扩充到文件的文件属性
:: %~tI - 将 %I 扩充到文件的日期 / 时间
:: %~zI - 将 %I 扩充到文件的大小
:: %~$PATH:I - 查找列在路径环境变量的目录，并将 %I 扩充
:: 到找到的第一个完全合格的名称。如果环境变量名
:: 未被定义，或者没有找到文件，此组合键会扩充到
:: 空字符串
:: 可以组合修饰符来得到多重结果 :
:: %~dpI - 仅将 %I 扩充到一个驱动器号和路径
:: %~nxI - 仅将 %I 扩充到一个文件名和扩展名
:: %~fsI - 仅将 %I 扩充到一个带有短名的完整路径名
:: %~dp$PATH:i - 查找列在路径环境变量的目录，并将 %I 扩充
:: 到找到的第一个驱动器号和路径。
:: %~ftzaI - 将 %I 扩充到类似输出线路的 DIR
```


### %PATH:~10,5% {#path-10-5}

-   扩展 PATH 环境变量，然后只使用在扩展结果中从第 11 个(偏 移量 10)字符开始的五个字符。
-   如果没有指定长度，则采用默认值，即变量数值的余数。
-   如果两个数字(偏移量和长度)都是负数，使用的数字则是环境变量数值长度加上指定的偏移量或长度。

-   %PATH:~-10%  会提取 PATH 变量的最后十个字符。
-   %PATH:~0,-2% 会提取 PATH 变量的所有字符，除了最后两个。